# REST API

## REST API :

**Representational State Transfer API**의 약자로 자원을 이름으로 구분하여 해당 자원의 상태를 주고 받는 것을 의미한다고 합니다.

또 두 컴퓨터 시스템이 인터넷을 통해 정보를 안전하게 교환하기 위해 사용하는 인터페이스입니다.

### 그럼 우선 REST API에 대해 알아보기 전에 **API**는 무엇일까요?

API는 정의 및 프로토콜 집합을 사용하여 두 소프트웨어 구성 요소가 서로 통신할 수 있도록 하는 메커니즘을 말합니다.

이 API에 요청을 보내는 에플리케이션을 클라이언트라 하고 응답을 보내는 애플리케이션을 서버라고 합니다.

그리고 이러한 API는 주로 CRUD를 위해 활용됩니다.

그럼 이렇게 만든 API를 사용하기 위해서는 URL이 필요로 할 것입니다.

이때 URL을 결정하는 몇가지 규칙이 있다고 합니다.

그 규칙은 아래와 같습니다.

1. 소문자를 활용한다.
2. 언더바대신 하이픈을 사용한다.
3. URL의 마지막에는 슬래시를 포함하지 않는다.
4. **계층관계를 나타낼 때는 슬래시 구분자를 사용한다.**
    1. `컬렉션/고유식별자` 와 같이 구분한다.
        1. 검색이나 필터를 처리하기 위해서는 query parameters를 활용하면 된다.
    2. 이때 행위는 포함하지 않는다. 행위는 URL 대신 Method를 사용하여 전달한다.
5. 파일 확장자는 URL에 포함시키지 않는다.
6. **전달하고자 하는 자원의 명사를 사용하되, 컨트롤 자원을 의미하는 경우 예외적으로 동사를 허용한다.**
7. **URL에 작성되는 영어를 복수형으로 작성한다.**
    1. 관계가 다른 리소스 내에서만 존재할 경우 RESTFUL 원칙은 다음과 같은 지침을 제공한다.
        1. [http://api.college.com/students/3248234/courses](http://api.college.com/students/3248234/courses)
            1. ID가 3248234인 학생이 학습한 모든 과정 목록 검색
        2. [http://api.college.com/students/3248234/courses/physics](http://api.college.com/students/3248234/courses/physics)
            1. ID가 3248234인 학생을 위한 과정 물리학을 검색한다.

### 그럼 이제 **REST**에 대해 알아봅시다.

REST는 API 작동 방식에 대한 조건을 부과하는 소프트웨어 아키텍처이다

REST 기반 아키텍처를 사용하여 대규모 고성능 통신을 안정적으로 지원할 수 있습니다.

그리고 쉽게 구현하고 수정할 수 잇어 API 시스템을 파악하고 여러 플랫폼에서 사용할 수 있다고 합니다.

이제 REST 아키텍쳐 스타일 원칙에 대해 알아봅시다.

**균일한 인터페이스**

균일한 인터페이스는 모든 RESTful 웹 서비스 디자인의 기본이다.

이 균일한 인터페이스에는 4가지 아키텍쳐 제약 조건이 있다.

1. 요청은 리소스를 식별해야 한다. 이를 위해 균일한 리소스 식별자를 사용한다.
2. 클라이언트는 원하는 경우 리소스를 수정하고너 삭제하기에 충분한 정보를 리소스 표현에서 가지고 있다. 서버는 리소스를 자세히 설명하는 메타데이터를 전송하여 이 조건을 충족한다.
3. 클라이언트는 표현을 추가로 처리하는 방법에 대한 정보를 수신한다. 이를 위해 서버는 클라이언트가 리소스를 적절하게 사용할 수 있는 방법에 대한 **메타데이터가 포함된 명확한 메시지**를 전송한다.
4. 클라이언트 작업을 완료하는 데 필요한 다른 모든 관련 리소스에 대한 정보를 수신한다. 이를 위해 서버는 클라이언트가 더 많은 리소스를 **동적으로 검색할 수 있도록 하이퍼링크를 넣어 전송한다.**

3)

<img width="1320" alt="스크린샷 2022-10-31 오후 11 05 59" src="https://user-images.githubusercontent.com/102807742/199065681-c151f0e6-e8fd-4c75-86be-f8a5512f6d7f.png">

`/HTTP/1.1` 만 있으면 목적지를 모르기에 Host를 추가해준 것을 볼 수 있다.

<img width="1037" alt="스크린샷 2022-10-31 오후 11 06 23" src="https://user-images.githubusercontent.com/102807742/199065701-a7050c7f-16ad-4145-a9cf-0ad6ec8e29d7.png">
<img width="1062" alt="스크린샷 2022-10-31 오후 11 06 40" src="https://user-images.githubusercontent.com/102807742/199065715-cd154f02-306e-47e7-80b7-b15989949199.png">
json 데이터 자체만으로는 `op` 그리고 `path` 가 어떤 역활을 하는지 알 수 없다.

그렇기에 json-patch+json과 같이 추가적인 정보를 주었다.

4)

<img width="1609" alt="스크린샷 2022-10-31 오후 11 07 23" src="https://user-images.githubusercontent.com/102807742/199065754-99bbde86-2f6e-48da-bff8-ef25bcc1a610.png">

하이퍼링크를 활용하면 위의 사진처럼 애플리케이션의 상태를 전이할 수 있다.

그럼 이러한 균일한 인터페이스로 얻을 수 있는 것은 무엇일까?

- 서버와 클라이언트가 각각 독립적으로 진화한다.
- 서버의 기능이 변경되어도 **클라이언트를 업데이트할 필요가 없다.**
    - “How do i implove HTTP without breaking the Web”

**무상태**

REST 아키텍처에서 무상태는 **서버가 이전의 모든 요청과 독립적으로 모든 클라이언트 요청을 완료하는 통신 방법을 나타낸다.**

클라이언트는 임의의 순서로 리소스를 요청할 수 있으며 **모든 요청은 무상태이거나 다른 요청과 분리된다.**

이 REST API 설계 제약 조건은 **서버가 매번 요청을 완전히 이해해서 이행할 수 있음을 의미한다.**

**계층화 시스템**

계층화된 시스템 아키텍처에서 클라이언트는 클라이언트와 서버 사이의 다른 승인된 중개자에게 연결할 수 있으며 여전히 서버로부터도 응답을 받는다.

서버는 요청을 다른 서버로 전달할 수도 있습니다. 클라이언트 요청을 이행하기 위해 함께 작동하는 보안, 애플리케이션 및 비즈니스 로직과 같은 여러 계층으로 여러 서버에서 실행되도록 RESTful 웹 서비스를 설계할 수 있다.

이러한 계층은 클라이언트에 보이지 않는 상태로 유지된다.

**캐시 가능성**

RESTful 웹 서비스는 서버 응답 시간을 개선하기 위해 클라이언트 또는 중개자에 일부 응답을 저장하는 프로세스인 캐싱을 지원한다.

RESTful 웹 서비스는 캐시 가능 또는 캐시 불가능으로 정의되는 API 응답을 사용하여 캐싱을 제어한다.

**온디맨드 코드**

REST 아키텍처 스타일에서 서버는 소프트웨어 프로그래밍 코드를 클라이언트에 전송하여 클라이언트 기능을 일시적으로 확장하거나 사용자 지정할 수 있다.

### REST  API에 대해 알아보았으니 이제 REST API를 사용한 요청에 대해서 알아봅시다.

우선 **RESTful API 클라이언트 요청**에는 다음과 같은 주요 구성요소를 포함하는 요청이 필요하다.

- 고유식별자 :
  서버는 고유한 리소스를 식별자로 각 리소스를 식별한다.
- 메서드 :
  HTTP 메서드는 리소스에 수행해야하는 작업을 서버에 알려준다.
- HTTP 헤더 :
  요청 헤더는 클라이언트와 서버 간에 교환되는 메타데이터이다.
  요청 및 응답의 형식을 나타내고 요청 상태 등에 대한 정보를 제공한다.
- 데이터 :
  HTTP 메서드가 성공적으로 작동하기 위한 데이터가 포함될 수 있다.
- 파라미터
    - URL 세부정보를 지정하는 경로 파라미터
    - 리소스에 대한 추가 정보를 요청하는 쿼리 파라미터
    - 클라이언트를 빠르게 인증하는 쿠키 파라미터

**RESTful API 서버 응답**에는 다음과 같은 주요 구성 요소가 포함된다.

- 상태 표시
- 메시지 본문 :
  리소스 표현이 포함된다. 서버는 요청 헤더에 포함된 내용을 기반으로 적절한 표현 형식을 선택한다.
- 헤더 :
  응답에는 응답에 대한 헤더 또는 메타데이터도 포함된다.

그럼 이런 REST API를 우리는 프로젝트에서 어떻게 사용할까요?

아마 아래와 같은 형태로 사용할 것 입니다.

<img width="320" alt="스크린샷 2022-11-01 오전 1 20 06" src="https://user-images.githubusercontent.com/102807742/199065800-c9d2efd3-f110-46fa-a5c3-a9e1e395f7d7.png">

우리가 흔히 사용하는 형식이기에 이상할 것이 없지만 위의 정보만으로는 `id`가 무엇을 의미하고 `title`이  무엇을 의미하는 지 알 방법이 없고 다음 상태로 전이할 링크가 없는 등 `균일한인터페이스-3,4` 를 충족시키지 못합니다.

이를 해결하기 위해서는 아래와 같은 방법이 있습니다.

<img width="1137" alt="스크린샷 2022-10-31 오후 11 21 11" src="https://user-images.githubusercontent.com/102807742/199065866-cd8e43d3-9e77-4522-a71b-dd6773fb4c05.png">
<img width="1171" alt="스크린샷 2022-10-31 오후 11 22 22" src="https://user-images.githubusercontent.com/102807742/199065882-ac85b7cd-4efe-4cf6-a19f-969ad71b47c2.png">

하지만 아직 우리가 위와 같은 것 까지 신경쓰며 API를 구현하는 것은 쉽지 않을 것 입니다.

그래서 이번에는 **URL 규칙**을 잘 지키면서 API를 사용하는 것을 목표로 프로젝트를 진행하는 것을 추천합니다.